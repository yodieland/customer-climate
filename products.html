<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CityCites - Products and Data</title>

    <!-- Include Bootstrap for styling -->
    <!-- jQuery CDN -->
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <!-- PapaParse CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>



    <!-- Include PapaParse for CSV parsing and jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <style>
    /* General styling for body and typography */
/* General Styling */
/* Override Bootstrap's default font */
/* Global Typography */
body, h1, h2, h3, h4, h5, h6, p, a, button {
    font-family: 'Lato', sans-serif !important;
}

body {
    font-family: 'Lato', sans-serif !important;
    background-color: #f5f5f5 !important;
    color: #333 !important;
    margin: 0 !important;
    padding: 0 !important;
}

/* Navbar */
.custom-navbar {
    background-color: #2c3e50 !important;
    padding: 10px 0 !important;
}

.navbar-brand, .nav-link {
    color: #ecf0f1 !important;
    font-weight: 600 !important;
}

.nav-link:hover {
    color: #ff9636 !important;
}

/* Hero Section */
.hero {
    background: linear-gradient(to right, #ff9636, #e67e22) !important;
    color: #fff !important;
    padding: 60px 20px !important;
    text-align: center !important;
    position: relative !important;
    overflow: hidden !important;
}

.hero h1 {
    font-size: 2.5rem !important;
    font-weight: bold !important;
    animation: fadeIn 1.5s ease-in-out !important;
}

.hero p {
    font-size: 1.2rem !important;
    margin-top: 10px !important;
    animation: fadeIn 2s ease-in-out !important;
}

.hero::before {
    content: "" !important;
    position: absolute !important;
    top: -50px !important;
    left: -50px !important;
    width: 200px !important;
    height: 200px !important;
    background: rgba(255, 255, 255, 0.1) !important;
    border-radius: 50% !important;
    animation: floatAnimation 6s infinite alternate ease-in-out !important;
}

@keyframes floatAnimation {
    0% { transform: translate(0, 0) !important; }
    100% { transform: translate(30px, 30px) !important; }
}

/* Features Section */
.features {
    display: flex !important;
    justify-content: center !important;
    gap: 20px !important;
    margin: 40px auto !important;
    max-width: 1000px !important;
}

.feature-card {
    background: #fff !important;
    border-radius: 10px !important;
    padding: 20px !important;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1) !important;
    text-align: center !important;
    width: 250px !important;
    transition: transform 0.3s ease-in-out !important;
}

.feature-card:hover {
    transform: scale(1.05) !important;
}

.feature-card img {
    width: 50px !important;
    margin-bottom: 10px !important;
}

/* About Section */
.about-container {
    max-width: 1000px !important;
    margin: 50px auto !important;
    text-align: center !important;
}

.about-container h2 {
    color: #2c3e50 !important;
    font-size: 1.8rem !important;
    margin-bottom: 20px !important;
}

.about-container p {
    color: #7f8c8d !important;
    font-size: 1.1rem !important;
    line-height: 1.6 !important;
}

/* Footer */
.footer {
    background-color: #2c3e50 !important;
    color: #fff !important;
    text-align: center !important;
    padding: 20px !important;
}

/* Future Comparison Section */
#futureComparisonSection {
    margin: 20px auto !important;
    max-width: 1000px !important;
    font-family: 'Roboto', sans-serif !important;
}

#futureComparisonSection h2 {
    text-align: center !important;
    margin-bottom: 20px !important;
    font-weight: 400 !important;
}

/* Dropdown Styling */
#futureComparisonSection select {
    padding: 8px 12px !important;
    margin: 10px !important;
    border: 1px solid #ccc !important;
    border-radius: 4px !important;
    font-size: 14px !important;
}

/* Table Styling */
#futureComparisonTable {
    width: 100% !important;
    border-collapse: collapse !important;
    margin-top: 20px !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
}

#futureComparisonTable th, 
#futureComparisonTable td {
    padding: 12px 15px !important;
    border: 1px solid #ddd !important;
    text-align: center !important;
    font-size: 14px !important;
}

#futureComparisonTable th {
    background-color: #007bff !important;
    color: #fff !important;
    font-weight: 600 !important;
}

#futureComparisonTable thead tr:nth-child(2) th {
    background-color: #0056b3 !important;
}

#futureComparisonTable tbody tr:nth-child(even) {
    background-color: #f9f9f9 !important;
}

#futureComparisonTable tbody tr:hover {
    background-color: #f1f1f1 !important;
}


  </style>
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg custom-navbar">
    <div class="container">
      <a class="navbar-brand" href="index.html">
        <img src="Picture2.png" alt="Welcome" style="height: 40px;">
    </a>
        <button class="navbar-toggler" data-toggle="collapse" data-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav mr-auto">
<li class="nav-item"><a class="nav-link" href="about.html">About</a></li>
<li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>

<!-- Dropdown for Offerings -->
<li class="nav-item dropdown">
  <a class="nav-link dropdown-toggle" href="products.html" id="offeringsDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Products
  </a>
  <ul class="dropdown-menu" aria-labelledby="offeringsDropdown">
    <li><a class="dropdown-item" href="#comparisonTable">Basic</a></li>
    <li><a class="dropdown-item" href="#premium">Premium</a></li>
    <li><a class="dropdown-item" href="#customreport">Custom</a></li>
  </ul>
</li>
</ul>
        <ul class="navbar-nav ms-auto">
          <li class="nav-item ms-4"><a class="nav-link" href="login.html">Login</a></li>
          <li class="nav-item ms-4"><a class="nav-link" href="signup.html">Sign Up</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Product Section -->
  <div class="container product-container">
    <h1 class="text-center">Our Products</h1>
    <div class="row">
      <!-- Product 1 -->
      <div class="col-md-4 product-card">
        <div class="card">
          <img src="choong-deng-xiang--WXQm_NTK0U-unsplash.jpg" alt="Product 1" class="product-image">
          <div class="card-body">
            <h5 class="card-title">City Data Metrics & CityCites Score</h5>
            <p class="card-text">Our free tool is designed to give you curated data & metrics. Get an instant snapshot of your CityCites ScoreÂ© proprietary algorithm.</p>
            <a href="#yearDropdown" id="learnMoreBtn" class="btn btn-primary">Learn More</a>
          </div>
        </div>
      </div>

      <!-- Product 2 -->
      <div class="col-md-4 product-card">
        <div class="card">
          <img src="towfiqu-barbhuiya-nApaSgkzaxg-unsplash.jpg" alt="Product 2" class="product-image">
          <div class="card-body">
            <h5 class="card-title">Comparative Metrics & Predictive Analytics</h5>
            <p class="card-text">Get an instant report that includes comparison data & metrics, trends, and predictive anlaytics.</p>
            <a href="#csvDropdown" id="learnMoreBtn" class="btn btn-primary">Learn More</a>
          </div>
        </div>
      </div>

      <!-- Product 3 -->
      <div class="col-md-4 product-card">
        <div class="card">
          <img src="campaign-creators-pypeCEaJeZY-unsplash.jpg" alt="Product 3" class="product-image">
          <div class="card-body">
            <h5 class="card-title">Customize Your Datal</h5>
            <p class="card-text">For organizations that need to leverage ML to uncover hidden patterns and trends in urban data.</p>
            <a href="contact.html" id="learnMoreBtn" class="btn btn-primary">Learn More</a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <title>City Metrics Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
      .section-spacing {
          margin-bottom: 3rem;
      }
      .table-container {
          margin-top: 2rem;
          margin-bottom: 2rem;
      }
      .form-spacing {
          margin-bottom: 1.5rem;
      }
      .button-spacing {
          margin-right: 1rem;
          margin-bottom: 1rem;
      }
      .embed-responsive {
          margin-top: 2rem;
          margin-bottom: 2rem;
      }
      .custom-report {
          margin-top: 3rem;
      }
  </style>
</head>
<body>
  <div class="container">
      <!-- City Score Dashboards -->
      <div class="section-spacing">
          <h1>City Score Dashboards</h1>
          <p>Pick your favorite city to see how the scores stack up! Using a proprietary algorthim, we have calculated linear and logorithmic scores.</p>
          <a href="https://scores-pzfpg93bqyylpfdpkepvgo.streamlit.app/" target="_blank">
              <button class="btn btn-primary button-spacing">Linear Scores</button>
          </a>
          <a href="https://logscores-iixxfoyabyahjz9vo8dcph.streamlit.app/" target="_blank">
              <button class="btn btn-primary button-spacing">Log Scores</button>
          </a>
         
      </div>

      <!-- City Demographics and Economic Data -->
      <div class="section-spacing">
          <h2>City Demographics and Economic Data</h2>
          <div class="form-spacing">
              <label>Select Year:</label>
              <select id="yearDropdown" class="form-select mb-3">
                  <option value="" disabled selected>Year</option>
                  <option value="2018">2018</option>
                  <option value="2019">2019</option>
                  <option value="2021">2021</option>
                  <option value="2022">2022</option>
              </select>
          </div>
          <div class="form-spacing">
              <label>Select City:</label>
              <select id="cityDropdown" class="form-select mb-3" disabled>
                  <option value="" disabled selected>City</option>
              </select>
          </div>
          <div class="form-spacing">
              <label>Filter by Category:</label>
              <div class="form-check">
                  <input type="checkbox" class="form-check-input category-filter" value="Social"> Social
              </div>
              <div class="form-check">
                  <input type="checkbox" class="form-check-input category-filter" value="Economic"> Economic
              </div>
              <div class="form-check">
                  <input type="checkbox" class="form-check-input category-filter" value="Political"> Political
              </div>
              <div class="form-check">
                  <input type="checkbox" class="form-check-input category-filter" value="Environmental"> Environmental
              </div>
          </div>
          <button id="filterBtn" class="btn btn-primary mt-3">Apply Filters</button>
          <table id="cityMetricsTable" class="table table-bordered table-striped mt-4">
              <thead id="cityMetricsTableHeader"></thead>
              <tbody id="cityMetricsTableBody"></tbody>
          </table>
      </div>

      <!-- City Comparison Section -->
      <div class="section-spacing">
          <h2>Compare Two Cities</h2>
          <p>Compare relavent metrics of two of your favorite cities</p>
          <div class="form-spacing">
              <label for="csvDropdown">Select Data Type & Year:</label>
              <select id="csvDropdown" class="form-control mb-3">
                  <optgroup label="Metrics Tables">
                      <option value="metrics-2018">Metrics Table - 2018</option>
                      <option value="metrics-2019">Metrics Table - 2019</option>
                      <option value="metrics-2021">Metrics Table - 2021</option>
                      <option value="metrics-2022">Metrics Table - 2022</option>
                  </optgroup>
                  <optgroup label="Data Points Tables">
                      <option value="data-2018">Data Points Table - 2018</option>
                      <option value="data-2019">Data Points Table - 2019</option>
                      <option value="data-2021">Data Points Table - 2021</option>
                      <option value="data-2022">Data Points Table - 2022</option>
                  </optgroup>
              </select>
          </div>
          <div class="row mb-3">
              <div class="col-md-6">
                  <label for="city1Dropdown">Select First City:</label>
                  <select id="city1Dropdown" class="form-control">
                      <option value="">Select City 1</option>
                  </select>
              </div>
              <div class="col-md-6">
                  <label for="city2Dropdown">Select Second City:</label>
                  <select id="city2Dropdown" class="form-control">
                      <option value="">Select City 2</option>
                  </select>
              </div>
          </div>
          <table id="comparisonTable" class="table table-bordered table-striped">
              <thead id="comparisonTableHeader"></thead>
              <tbody id="comparisonTableBody"></tbody>
          </table>
      </div>
      
      <div class="section-spacing">
        <h2>City Metrics Trend</h2>
        <div class="form-spacing">
            <label for="cityTrendDropdown">Look up metric trends over the past several years</label>
            <select id="cityTrendDropdown" class="form-control mb-3">
                <option value="">Select City</option>
            </select>
        </div>
        <table id="metricsTable" class="table table-bordered table-striped">
            <thead id="metricsTableHeader"></thead>
            <tbody id="metricsTableBody"></tbody>
        </table>
    </div>
      <!-- Future Metrics Comparison -->
      <div class="section-spacing">
          <h2>Metrics Trend Comparison (2023-2026)</h2>
          <p>Compare city trends over several years</p>
          <div class="form-spacing">
              <label for="futureCity1Dropdown">City 1:</label>
              <select id="futureCity1Dropdown" class="form-control"></select>
          </div>
          <div class="form-spacing">
              <label for="futureCity2Dropdown">City 2:</label>
              <select id="futureCity2Dropdown" class="form-control"></select>
          </div>
          <table id="futureComparisonTable" class="table table-bordered table-striped">
              <thead id="futureComparisonTableHeader"></thead>
              <tbody id="futureComparisonTableBody"></tbody>
          </table>
      </div>

      <!-- City Metrics Trend Section -->
     

      <!-- Custom Reports -->
      <div class="section-spacing custom-report">
          <h2 id="customreport">Custom Reports</h2>
          <p>View the latest custom report below:</p>
          <div class="embed-responsive">
              <embed src="products_report.pdf" type="application/pdf" width="100%" height="600px" />
          </div>
      </div>

      <!-- City Insights -->
      <!-- City Insights Section -->
<div class="section-spacing">
    <h2>City InsitesÂ©</h2>
    <p>City InsitesÂ© provides a quick snapshot of the fiscal markers giving you the expenditures and revenues in a particular time frame</p>

    <!-- City Selection Dropdowns -->
    <div class="form-spacing">
        <label for="citySelect1">Select City for Financial Data:</label>
        <select id="citySelect1" class="form-control">
            <option value="">Select City 1</option>
        </select>
    </div>
    <div class="form-spacing">
        <label for="citySelect2">Select City for Financial Metrics:</label>
        <select id="citySelect2" class="form-control">
            <option value="">Select City 2</option>
        </select>
    </div>

    <!-- Raw Data Table -->
    <h5>Financial Data</h5>
    <table id="rawDataTable" class="table table-bordered table-striped">
        <thead>
            <tr>
                <th>Budget Line Items</th>
                <th>Value</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
<br>

<br>
    <!-- Percentage Data Table -->
    <h5>Comparison to Ideal City Metrics</h5>
    <table id="percentageDataTable" class="table table-bordered table-striped">
        <thead>
            <tr>
                <th>Metric</th>
                <th>Percentage</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
<br>

<br>
    <!-- Placemaking Section -->
    <h2>Placemaking</h2>
    <p>Cities invest in critical areas to have a positive impact on residents and businesses </p>
    <div class="form-spacing">
        <label for="citySelect3">Select City for Placemaking:</label>
        <select id="citySelect3" class="form-control">
            <option value="">Select City 3</option>
        </select>
    </div>

    <!-- Placemaking Table -->
    <h5>Expenditures Compared to Reference City</h5>
    <table id="placemakingTable" class="table table-bordered table-striped">
        <thead>
            <tr>
                <th>Metric</th>
                <th>Reference City Value</th>
                <th>Selected City Value</th>
                <th>Percentage of Reference City</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>
  <script>
   $(document).ready(function () {
    let allMetricsData = {};
    let allDataPointsData = {};
    let categoryMap = {};  // Stores categories for filtering

    function loadAllCSVs() {
        const metricsUrls = {
            "2018": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/metrics%20table%20-%202018.csv",
            "2019": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/metrics%20table%20-%202019.csv",
            "2021": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/metrics%20table%20-%202021.csv",
            "2022": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/metrics%20table%20-%202022.csv"
        };

        const dataPointsUrls = {
            "2018": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/data%20points%20table%20-%202018.csv",
            "2019": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/data%20points%20table%20-%202019.csv",
            "2021": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/data%20points%20table%20-%202021.csv",
            "2022": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/data%20points%20table%20-%202022.csv"
        };

        const promises = [];

        // Load Metrics Data
        Object.keys(metricsUrls).forEach(year => {
            promises.push(new Promise((resolve, reject) => {
                Papa.parse(metricsUrls[year], {
                    download: true,
                    header: true,
                    complete: function(results) {
                        allMetricsData[year] = results.data;
                        extractCategoryMapping(results.data);
                        resolve();
                    },
                    error: function(error) {
                        console.error("Error loading metrics CSV:", error);
                        reject();
                    }
                });
            }));
        });

        // Load Data Points
        Object.keys(dataPointsUrls).forEach(year => {
            promises.push(new Promise((resolve, reject) => {
                Papa.parse(dataPointsUrls[year], {
                    download: true,
                    header: true,
                    complete: function(results) {
                        allDataPointsData[year] = results.data;
                        resolve();
                    },
                    error: function(error) {
                        console.error("Error loading data points CSV:", error);
                        reject();
                    }
                });
            }));
        });

        Promise.all(promises).then(() => {
            console.log("All data loaded successfully!");
            populateCityDropdown();
        });
    }

    function extractCategoryMapping(data) {
        // Check if a "CATEGORY" row exists
        const categoryRowIndex = data.findIndex(row => Object.values(row).includes("CATEGORY"));
        if (categoryRowIndex !== -1) {
            const headers = Object.keys(data[0]);
            const categoryRow = data[categoryRowIndex];

            headers.forEach(header => {
                categoryMap[header] = categoryRow[header] || "Uncategorized";
            });
        }
    }

    function populateCityDropdown() {
        const cityDropdown = $('#cityDropdown');
        let cityNames = new Set();

        Object.keys(allMetricsData).forEach(year => {
            allMetricsData[year].forEach(row => cityNames.add(row.CITY));
        });

        cityDropdown.empty().append('<option value="" disabled selected>Select a city</option>');
        cityNames.forEach(city => cityDropdown.append(`<option value="${city}">${city}</option>`));
        cityDropdown.prop("disabled", false);
    }

    $("#yearDropdown, #cityDropdown").on("change", function () {
        const selectedYear = $("#yearDropdown").val();
        const selectedCity = $("#cityDropdown").val();
        if (selectedYear && selectedCity) {
            showCityData(selectedYear, selectedCity);
        }
    });

    function showCityData(year, cityName) {
        console.log("Fetching data for:", cityName, "in", year);

        const cityMetricsTableHeader = $('#cityMetricsTableHeader');
        const cityMetricsTableBody = $('#cityMetricsTableBody');

        cityMetricsTableHeader.empty();
        cityMetricsTableBody.empty();

        const cityMetricsData = allMetricsData[year]?.find(row => row.CITY === cityName);
        const cityDataPointsData = allDataPointsData[year]?.find(row => row.CITY === cityName);

        if (cityMetricsData && cityDataPointsData) {
            const headersMetrics = Object.keys(cityMetricsData);
            const headersDataPoints = Object.keys(cityDataPointsData);

            // Get selected category filters
            const selectedCategories = $(".category-filter:checked").map((_, el) => el.value.toLowerCase()).get();

            const headerRow = $('<tr></tr>');
            headerRow.append('<th>Metric</th><th>Value</th><th>Data Point</th><th>Value</th>');
            cityMetricsTableHeader.append(headerRow);

            headersMetrics.forEach((header, index) => {
                if (header !== "CITY" && header !== "year") {
                    // Check if the metric belongs to the selected category
                    if (selectedCategories.length === 0 || selectedCategories.includes(categoryMap[header]?.toLowerCase())) {
                        const rowElement = $('<tr></tr>');
                        rowElement.append(`<td>${header}</td>`);
                        rowElement.append(`<td>${cityMetricsData[header] || 'N/A'}</td>`);
                        rowElement.append(`<td>${headersDataPoints[index] || 'N/A'}</td>`);
                        rowElement.append(`<td>${cityDataPointsData[headersDataPoints[index]] || 'N/A'}</td>`);
                        cityMetricsTableBody.append(rowElement);
                    }
                }
            });
        } else {
            cityMetricsTableBody.append('<tr><td colspan="4">No data available for this city and year.</td></tr>');
        }
    }

    $("#filterBtn").on("click", function () {
        const selectedYear = $("#yearDropdown").val();
        const selectedCity = $("#cityDropdown").val();
        if (selectedYear && selectedCity) {
            showCityData(selectedYear, selectedCity);
        }
    });

    loadAllCSVs();
});


    </script>
<script>
  $(document).ready(function () {
    let originalData = []; // âœ… Define globally so it can be accessed anywhere

    const csvUrls = {
        "metrics-2018": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/metrics%20table%20-%202018.csv",
        "metrics-2019": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/metrics%20table%20-%202019.csv",
        "metrics-2021": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/metrics%20table%20-%202021.csv",
        "metrics-2022": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/metrics%20table%20-%202022.csv",
        "data-2018": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/data%20points%20table%20-%202018.csv",
        "data-2019": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/data%20points%20table%20-%202019.csv",
        "data-2021": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/data%20points%20table%20-%202021.csv",
        "data-2022": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/data%20points%20table%20-%202022.csv"
    };

    function loadCSV(type) {
        if (!csvUrls[type]) {
            console.error("No CSV URL found for selected type.");
            return;
        }

        Papa.parse(csvUrls[type], {
            download: true,
            header: true,
            skipEmptyLines: true,
            complete: function (results) {
                if (!results.data || results.data.length === 0) {
                    console.error("No data found in CSV.");
                    return;
                }
                originalData = results.data; // âœ… Now originalData is properly assigned
                console.log("Loaded data:", originalData); // Debugging step
                populateCityDropdowns(originalData);
            },
            error: function (error) {
                console.error("Failed to load CSV:", error);
            }
        });
    }

    function populateCityDropdowns(data) {
        const city1Dropdown = $('#city1Dropdown');
        const city2Dropdown = $('#city2Dropdown');
        city1Dropdown.empty();
        city2Dropdown.empty();

        city1Dropdown.append('<option value="">Select City 1</option>');
        city2Dropdown.append('<option value="">Select City 2</option>');

        const cities = [...new Set(data.map(row => row.CITY?.trim()).filter(Boolean))].sort();
        if (cities.length === 0) {
            console.warn("No cities found in dataset.");
        }

        cities.forEach(city => {
            city1Dropdown.append(`<option value="${city}">${city}</option>`);
            city2Dropdown.append(`<option value="${city}">${city}</option>`);
        });
    }

    function compareCities() {
        if (!originalData || originalData.length === 0) {
            console.error("originalData is empty or not loaded yet.");
            return;
        }

        const city1 = $('#city1Dropdown').val();
        const city2 = $('#city2Dropdown').val();
        if (!city1 || !city2) {
            console.warn("Please select both cities.");
            return;
        }

        const city1Data = originalData.find(row => row.CITY === city1);
        const city2Data = originalData.find(row => row.CITY === city2);

        if (!city1Data || !city2Data) {
            console.error("City data not found.");
            return;
        }

        buildComparisonTable(city1Data, city2Data);
    }

    function buildComparisonTable(city1Data, city2Data) {
        const comparisonTableHeader = $('#comparisonTableHeader');
        const comparisonTableBody = $('#comparisonTableBody');

        // Clear previous content
        comparisonTableHeader.empty();
        comparisonTableBody.empty();

        if (!city1Data || !city2Data) {
            console.warn("City data missing for one or both cities.");
            return;
        }

        // Extract headers (excluding "CITY")
        const headers = Object.keys(city1Data).filter(header => header !== "CITY");

        let headerRow = `<tr><th>Metrics</th><th>${city1Data.CITY}</th><th>${city2Data.CITY}</th></tr>`;
        comparisonTableHeader.append(headerRow);

        headers.forEach(header => {
            let row = `<tr>
                <td>${header}</td>
                <td>${city1Data[header] || 'N/A'}</td>
                <td>${city2Data[header] || 'N/A'}</td>
            </tr>`;
            comparisonTableBody.append(row);
        });
    }

    $('#csvDropdown').on('change', function () {
        loadCSV($(this).val());
    });

    $('#city1Dropdown, #city2Dropdown').on('change', function () {
        compareCities();
    });

    loadCSV($('#csvDropdown').val()); // âœ… Load initial dataset when the page loads
});

    
</script>



<script>
  $(document).ready(function () {
    let originalData = []; // âœ… Define globally so it can be accessed anywhere

    const csvUrls = {
        "metrics-2018": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/metrics%20table%20-%202018.csv",
        "metrics-2019": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/metrics%20table%20-%202019.csv",
        "metrics-2021": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/metrics%20table%20-%202021.csv",
        "metrics-2022": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/metrics%20table%20-%202022.csv",
        "data-2018": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/data%20points%20table%20-%202018.csv",
        "data-2019": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/data%20points%20table%20-%202019.csv",
        "data-2021": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/data%20points%20table%20-%202021.csv",
        "data-2022": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/data%20points%20table%20-%202022.csv"
    };

    function loadCSV(type) {
        if (!csvUrls[type]) {
            console.error("No CSV URL found for selected type.");
            return;
        }

        Papa.parse(csvUrls[type], {
            download: true,
            header: true,
            skipEmptyLines: true,
            complete: function (results) {
                if (!results.data || results.data.length === 0) {
                    console.error("No data found in CSV.");
                    return;
                }
                originalData = results.data; // âœ… Now originalData is properly assigned
                console.log("Loaded data:", originalData); // Debugging step
                populateCityDropdowns(originalData);
            },
            error: function (error) {
                console.error("Failed to load CSV:", error);
            }
        });
    }

    function populateCityDropdowns(data) {
        const city1Dropdown = $('#city1Dropdown');
        const city2Dropdown = $('#city2Dropdown');
        city1Dropdown.empty();
        city2Dropdown.empty();

        city1Dropdown.append('<option value="">Select City 1</option>');
        city2Dropdown.append('<option value="">Select City 2</option>');

        const cities = [...new Set(data.map(row => row.CITY?.trim()).filter(Boolean))].sort();
        if (cities.length === 0) {
            console.warn("No cities found in dataset.");
        }

        cities.forEach(city => {
            city1Dropdown.append(`<option value="${city}">${city}</option>`);
            city2Dropdown.append(`<option value="${city}">${city}</option>`);
        });
    }

    function compareCities() {
        if (!originalData || originalData.length === 0) {
            console.error("originalData is empty or not loaded yet.");
            return;
        }

        const city1 = $('#city1Dropdown').val();
        const city2 = $('#city2Dropdown').val();
        if (!city1 || !city2) {
            console.warn("Please select both cities.");
            return;
        }

        const city1Data = originalData.find(row => row.CITY === city1);
        const city2Data = originalData.find(row => row.CITY === city2);

        if (!city1Data || !city2Data) {
            console.error("City data not found.");
            return;
        }

        buildComparisonTable(city1Data, city2Data);
    }

    function buildComparisonTable(city1Data, city2Data) {
        const comparisonTableHeader = $('#comparisonTableHeader');
        const comparisonTableBody = $('#comparisonTableBody');

        // Clear previous content
        comparisonTableHeader.empty();
        comparisonTableBody.empty();

        if (!city1Data || !city2Data) {
            console.warn("City data missing for one or both cities.");
            return;
        }

        // Extract headers (excluding "CITY")
        const headers = Object.keys(city1Data).filter(header => header !== "CITY");

        let headerRow = `<tr><th>Metrics</th><th>${city1Data.CITY}</th><th>${city2Data.CITY}</th></tr>`;
        comparisonTableHeader.append(headerRow);

        headers.forEach(header => {
            let row = `<tr>
                <td>${header}</td>
                <td>${city1Data[header] || 'N/A'}</td>
                <td>${city2Data[header] || 'N/A'}</td>
            </tr>`;
            comparisonTableBody.append(row);
        });
    }

    $('#csvDropdown').on('change', function () {
        loadCSV($(this).val());
    });

    $('#city1Dropdown, #city2Dropdown').on('change', function () {
        compareCities();
    });

    loadCSV($('#csvDropdown').val()); // âœ… Load initial dataset when the page loads
});


</script>
<script>
  $(document).ready(function () {
      let allMetricsData = {};
      let allDataPointsData = {};
  
      function loadAllCSVs() {
          const metricsUrls = {
              "2018": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/metrics%20table%20-%202018.csv",
              "2019": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/metrics%20table%20-%202019.csv",
              "2021": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/metrics%20table%20-%202021.csv",
              "2022": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/metrics%20table%20-%202022.csv"
          };
  
          const dataPointsUrls = {
              "2018": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/data%20points%20table%20-%202018.csv",
              "2019": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/data%20points%20table%20-%202019.csv",
              "2021": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/data%20points%20table%20-%202021.csv",
              "2022": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/data%20points%20table%20-%202022.csv"
          };
  
          const promises = [];
  
          // Load Metrics Data
          Object.keys(metricsUrls).forEach(year => {
              promises.push(new Promise((resolve, reject) => {
                  Papa.parse(metricsUrls[year], {
                      download: true,
                      header: true,
                      complete: function (results) {
                          allMetricsData[year] = results.data;
                          console.log(`âœ… Loaded metrics data for ${year}:`, results.data);
                          resolve();
                      },
                      error: function (error) {
                          console.error(`âŒ Error loading metrics CSV (${year}):`, error);
                          reject();
                      }
                  });
              }));
          });
  
          // Load Data Points
          Object.keys(dataPointsUrls).forEach(year => {
              promises.push(new Promise((resolve, reject) => {
                  Papa.parse(dataPointsUrls[year], {
                      download: true,
                      header: true,
                      complete: function (results) {
                          allDataPointsData[year] = results.data;
                          console.log(`âœ… Loaded data points for ${year}:`, results.data);
                          resolve();
                      },
                      error: function (error) {
                          console.error(`âŒ Error loading data points CSV (${year}):`, error);
                          reject();
                      }
                  });
              }));
          });
  
          Promise.all(promises).then(() => {
              console.log("âœ… All data loaded successfully!");
              populateCityTrendDropdown();
          }).catch(error => console.error("âŒ Error loading CSV files:", error));
      }
  
      function populateCityTrendDropdown() {
          const cityTrendDropdown = $('#cityTrendDropdown');
          const cityNames = new Set();
  
          // Collect unique city names from all years
          Object.keys(allMetricsData).forEach(year => {
              allMetricsData[year].forEach(row => {
                  if (row.CITY || row.City) cityNames.add(row.CITY || row.City);
              });
          });
  
          Object.keys(allDataPointsData).forEach(year => {
              allDataPointsData[year].forEach(row => {
                  if (row.CITY || row.City) cityNames.add(row.CITY || row.City);
              });
          });
  
          // Populate dropdown
          cityTrendDropdown.empty().append('<option value="">Select a City</option>');
          cityNames.forEach(city => {
              cityTrendDropdown.append(`<option value="${city}">${city}</option>`);
          });
      }
  
      // Event listener for city selection
      $('#cityTrendDropdown').on('change', function () {
          const selectedCity = $(this).val();
          if (selectedCity) {
              showCityTrend(selectedCity);
          } else {
              $('#metricsTableHeader, #metricsTableBody, #dataPointsTableHeader, #dataPointsTableBody').empty();
          }
      });
  
      function showCityTrend(cityName) {
          console.log("Fetching trend for:", cityName);
  
          const metricsTableHeader = $('#metricsTableHeader');
          const metricsTableBody = $('#metricsTableBody');
          const dataPointsTableHeader = $('#dataPointsTableHeader');
          const dataPointsTableBody = $('#dataPointsTableBody');
  
          metricsTableHeader.empty();
          metricsTableBody.empty();
          dataPointsTableHeader.empty();
          dataPointsTableBody.empty();
  
          const cityDataMetrics = [];
          const cityDataPoints = [];
  
          // Get Metrics Data for the selected city
          Object.keys(allMetricsData).forEach(year => {
              const cityYearData = allMetricsData[year].find(row => row.CITY === cityName || row.City === cityName);
              if (cityYearData) {
                  cityDataMetrics.push({ ...cityYearData, year });
              }
          });
  
          // Get Data Points for the selected city
          Object.keys(allDataPointsData).forEach(year => {
              const cityYearData = allDataPointsData[year].find(row => row.CITY === cityName || row.City === cityName);
              if (cityYearData) {
                  cityDataPoints.push({ ...cityYearData, year });
              }
          });
  
          console.log("ðŸ“Š City Metrics Data: ", cityDataMetrics);
          console.log("ðŸ“Š City Data Points: ", cityDataPoints);
  
          if (cityDataMetrics.length > 0) {
              const headersMetrics = Object.keys(cityDataMetrics[0]).filter(header => header !== 'year' && header !== 'CITY');
  
              const headerRow = $('<tr></tr>');
              headerRow.append('<th>Year</th>');
              headersMetrics.forEach(header => {
                  headerRow.append(`<th>${header}</th>`);
              });
              metricsTableHeader.append(headerRow);
  
              cityDataMetrics.forEach(row => {
                  const rowElement = $('<tr></tr>');
                  rowElement.append(`<td>${row.year}</td>`);
  
                  headersMetrics.forEach(header => {
                      rowElement.append(`<td>${row[header] || 'N/A'}</td>`);
                  });
  
                  metricsTableBody.append(rowElement);
              });
          } else {
              metricsTableBody.append('<tr><td colspan="100%">No data available for this city.</td></tr>');
          }
  
          if (cityDataPoints.length > 0) {
              const headersDataPoints = Object.keys(cityDataPoints[0]).filter(header => header !== 'year' && header !== 'CITY');
  
              const headerRow = $('<tr></tr>');
              headerRow.append('<th>Year</th>');
              headersDataPoints.forEach(header => {
                  headerRow.append(`<th>${header}</th>`);
              });
              dataPointsTableHeader.append(headerRow);
  
              cityDataPoints.forEach(row => {
                  const rowElement = $('<tr></tr>');
                  rowElement.append(`<td>${row.year}</td>`);
  
                  headersDataPoints.forEach(header => {
                      rowElement.append(`<td>${row[header] || 'N/A'}</td>`);
                  });
  
                  dataPointsTableBody.append(rowElement);
              });
          } else {
              dataPointsTableBody.append('<tr><td colspan="100%">No data available for this city.</td></tr>');
          }
      }
  
      loadAllCSVs();
  });
  </script>
  <script>
    $(document).ready(function () {
      let futureData = []; // Global array to hold combined CSV data
      let loadCount = 0;
      
      // Define raw GitHub CSV URLs for each future year (update these URLs)
      const predictedUrls = {
        "2023": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/Predicted_Metrics_2023-2026%20%20-%202023.csv",
        "2024": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/Predicted_Metrics_2023-2026%20%20-%202024.csv",
        "2025": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/Predicted_Metrics_2023-2026%20%20-%202025.csv",
        "2026": "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/Predicted_Metrics_2023-2026%20%20-%202026.csv"
      };
      
      const years = Object.keys(predictedUrls);
      
      // Load each CSV and add a "Year" property to each row
      years.forEach(function (year) {
        Papa.parse(predictedUrls[year], {
          download: true,
          header: true,
          skipEmptyLines: true,
          complete: function (results) {
            if (results.data && results.data.length > 0) {
              results.data.forEach(function (row) {
                row.Year = year; // Tag each row with its year
                futureData.push(row);
              });
            }
            loadCount++;
            if (loadCount === years.length) {
              console.log("All future CSVs loaded:", futureData);
              populateFutureCityDropdowns(futureData);
            }
          },
          error: function (error) {
            console.error("Error loading CSV for " + year + ":", error);
            loadCount++;
            if (loadCount === years.length) {
              populateFutureCityDropdowns(futureData);
            }
          }
        });
      });
      
      // Group the future data by city.
      // The resulting structure is: { "City Name": { "2023": {...}, "2024": {...}, ... } }
      function buildCityData(data) {
        const cityData = {};
        data.forEach(function (row) {
          const city = row.CITY ? row.CITY.trim() : "";
          const year = row.Year ? row.Year.trim() : "";
          if (city) {
            if (!cityData[city]) {
              cityData[city] = {};
            }
            cityData[city][year] = row;
          }
        });
        return cityData;
      }
      
      // Populate the dropdown menus with unique city names
      function populateFutureCityDropdowns(data) {
        const cityData = buildCityData(data);
        const cities = Object.keys(cityData).sort();
        const dropdown1 = $('#futureCity1Dropdown');
        const dropdown2 = $('#futureCity2Dropdown');
        dropdown1.empty().append('<option value="">Select City 1</option>');
        dropdown2.empty().append('<option value="">Select City 2</option>');
        
        if (cities.length === 0) {
          console.warn("No cities found in future data.");
        }
        
        cities.forEach(function (city) {
          dropdown1.append(`<option value="${city}">${city}</option>`);
          dropdown2.append(`<option value="${city}">${city}</option>`);
        });
      }
      
      // Build the comparison table for two selected cities
      function buildFutureComparisonTable(cityData, city1, city2) {
        const yearsToDisplay = ["2023", "2024", "2025", "2026"];
        
        // Determine the list of metrics by using the keys from one of the city's data for one year.
        // Exclude "CITY" and "Year" from the metric list.
        let metrics = [];
        if (cityData[city1] && cityData[city1]["2023"]) {
          metrics = Object.keys(cityData[city1]["2023"]).filter(key => key !== "CITY" && key !== "Year");
        }
        
        // Build header rows: first row for city names and second for years.
        let headerHtml = "<tr><th rowspan='2'>Metric</th>";
        headerHtml += `<th colspan='${yearsToDisplay.length}'>${city1}</th><th colspan='${yearsToDisplay.length}'>${city2}</th></tr>`;
        headerHtml += "<tr>";
        yearsToDisplay.forEach(year => { headerHtml += `<th>${year}</th>`; });
        yearsToDisplay.forEach(year => { headerHtml += `<th>${year}</th>`; });
        headerHtml += "</tr>";
        
        // Build the table body: each row corresponds to one metric.
        let bodyHtml = "";
        metrics.forEach(metric => {
          bodyHtml += "<tr>";
          bodyHtml += `<td>${metric}</td>`;
          
          // Values for city1 across the years
          yearsToDisplay.forEach(year => {
            const val = cityData[city1][year] ? cityData[city1][year][metric] : "N/A";
            bodyHtml += `<td>${val || "N/A"}</td>`;
          });
          
          // Values for city2 across the years
          yearsToDisplay.forEach(year => {
            const val = cityData[city2][year] ? cityData[city2][year][metric] : "N/A";
            bodyHtml += `<td>${val || "N/A"}</td>`;
          });
          bodyHtml += "</tr>";
        });
        
        $('#futureComparisonTableHeader').html(headerHtml);
        $('#futureComparisonTableBody').html(bodyHtml);
      }
      
      // When the user selects a city from either dropdown, build the comparison table if both are selected.
      $('#futureCity1Dropdown, #futureCity2Dropdown').on('change', function () {
        if (!futureData.length) return;
        const cityData = buildCityData(futureData);
        const city1 = $('#futureCity1Dropdown').val();
        const city2 = $('#futureCity2Dropdown').val();
        if (city1 && city2) {
          buildFutureComparisonTable(cityData, city1, city2);
        }
      });
    });
    </script>
   <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
   <!-- DataTables JS -->
   <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
   <!-- PapaParse for CSV parsing -->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
   <script>
 $(document).ready(function () {
    const metricsCsvUrl = "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/city_metrics_as_percentages_of_golden_city%20-%20city_metrics_as_percentages_of_golden_city.csv.csv";
    const expendituresCsvUrl = "https://raw.githubusercontent.com/yodieland/csv-data-host/refs/heads/main/expenditures%20-%20Sheet1.csv";

    let rawDataTable, percentageDataTable, placemakingTable;
    let cities = [];
    let metricsData = [];
    let expendituresData = [];

    // Initialize DataTables
    function initializeTables() {
        rawDataTable = $("#rawDataTable").DataTable({
            paging: false,
            searching: false,
            info: false,
            columns: [
                { data: "Metric" },
                { data: "Value" }
            ],
            createdRow: function(row, data) {
                // Highlight priority metrics
                if (data.Metric === "Expenditure per Person" || data.Metric === "Revenue per Person") {
                    $(row).css({
                        'background-color': '#f8f9fa',
                        'font-weight': 'bold',
                        'border-left': '4px solid #28a745'
                    });
                    $(row).find('td:first').css('color', '#218838');
                }
            }
        });

        percentageDataTable = $("#percentageDataTable").DataTable({
            paging: false,
            searching: false,
            info: false,
            columns: [
                { data: "Metric" },
                { data: "Percentage" }
            ]
        });

        placemakingTable = $("#placemakingTable").DataTable({
            paging: false,
            searching: false,
            info: false,
            columns: [
                { data: "Metric" },
                { data: "GoldenCityValue" },
                { data: "SelectedCityValue" },
                { data: "Percentage" }
            ]
        });
    }

    // Fetch and parse Metrics CSV data
    Papa.parse(metricsCsvUrl, {
        download: true,
        header: true,
        dynamicTyping: true,
        complete: function (results) {
            if (results.errors.length > 0) {
                console.error("Errors while parsing Metrics CSV:", results.errors);
                return;
            }
            metricsData = results.data;
            cities = metricsData.map(row => row.City).filter(city => city !== "Golden City (Average)");
            
            // Populate dropdowns
            populateDropdown("citySelect1", cities);
            populateDropdown("citySelect2", cities);
            populateDropdown("citySelect3", cities);

            // Initialize tables
            initializeTables();
            updateRawDataTable();
            updatePercentageDataTable();
        }
    });

    // Fetch and parse Expenditures CSV data
    Papa.parse(expendituresCsvUrl, {
        download: true,
        header: true,
        dynamicTyping: true,
        complete: function (results) {
            if (results.errors.length > 0) {
                console.error("Errors while parsing Expenditures CSV:", results.errors);
                return;
            }
            expendituresData = results.data;
            
            // Initialize placemaking table
            if (cities.length > 0) {
                updatePlacemakingTable();
            }
        }
    });

    function populateDropdown(dropdownId, options) {
        const dropdown = document.getElementById(dropdownId);
        dropdown.innerHTML = options.map(city => `<option value="${city}">${city}</option>`).join("");
    }

    function updateRawDataTable() {
        const selectedCity = document.getElementById("citySelect1").value;
        const cityData = metricsData.find(row => row.City === selectedCity);
        
        if (!cityData) {
            console.error("City data not found!");
            return;
        }

        // Define priority metrics
        const priorityMetrics = [
            "Expenditure per Person",
            "Revenue per Person"
        ];

        // Get all other metrics (excluding City and percentage columns)
        const otherMetrics = Object.keys(cityData)
            .filter(key => key !== "City" && 
                  !key.includes("(% of Golden City)") && 
                  !priorityMetrics.includes(key))
            .sort();

        // Combine with priority metrics first
        const orderedMetrics = [...priorityMetrics, ...otherMetrics];

        // Create table data
        const tableData = orderedMetrics.map(metric => ({
            Metric: metric,
            Value: cityData[metric] !== undefined ? cityData[metric] : "N/A"
        }));

        rawDataTable.clear().rows.add(tableData).draw();
    }

    function updatePercentageDataTable() {
        const selectedCity = document.getElementById("citySelect2").value;
        const cityData = metricsData.find(row => row.City === selectedCity);
        
        if (!cityData) {
            console.error("City data not found!");
            return;
        }

        const percentageData = Object.entries(cityData)
            .filter(([key]) => key.includes("(% of Golden City)"))
            .map(([key, value]) => ({ 
                Metric: key.replace(" (% of Golden City)", ""), 
                Percentage: value 
            }))
            .sort((a, b) => a.Metric.localeCompare(b.Metric));

        percentageDataTable.clear().rows.add(percentageData).draw();
    }

    function updatePlacemakingTable() {
        const selectedCity = document.getElementById("citySelect3").value;
        const goldenCityData = expendituresData.find(row => row.City === "Golden City (Average)");
        const selectedCityData = expendituresData.find(row => row.City === selectedCity);

        if (!goldenCityData || !selectedCityData) {
            console.error("Golden City or selected city data not found!");
            return;
        }

        const placemakingMetrics = [
            "Public Safety per Person",
            "Public Works per Person",
            "Parks & Rec. per Person",
            "Comm. & Econ. Dev. per Person",
            "Public Health per Person",
            "Public Safety",
            "Public Works",
            "Parks & Rec.",
            "Comm. & Econ. Dev.",
            "Public Health"
        ];

        const placemakingData = placemakingMetrics.map(metric => {
            const goldenCityValue = goldenCityData[metric];
            const selectedCityValue = selectedCityData[metric];
            const percentage = goldenCityValue !== 0 ? 
                ((selectedCityValue / goldenCityValue) * 100).toFixed(2) : 
                "N/A";
            
            return {
                Metric: metric,
                GoldenCityValue: goldenCityValue,
                SelectedCityValue: selectedCityValue,
                Percentage: percentage !== "N/A" ? `${percentage}%` : "N/A"
            };
        });

        placemakingTable.clear().rows.add(placemakingData).draw();
    }

    // Add event listeners
    document.getElementById("citySelect1").addEventListener("change", updateRawDataTable);
    document.getElementById("citySelect2").addEventListener("change", updatePercentageDataTable);
    document.getElementById("citySelect3").addEventListener("change", updatePlacemakingTable);
});
      </script>
    
